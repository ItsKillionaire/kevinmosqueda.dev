---
import AboutVisual from './AboutVisual.astro';
---
<section class="about">
  <div class="about-content">
    <div class="about-text">
      <p class="about-label">[ about_me ]</p>
      <h2 class="about-heading">From Infrastructure to Interaction</h2>
      <p>
        For years, my world has been the bedrock of technology. As a System Administrator, I've architected and maintained the intricate server environments that power modern applications. Working deep within Linux and Windows systems, I've mastered the art of automation with Bash and PowerShell to create resilient, efficient infrastructure. This has given me a unique, metal-up perspective on how software truly operates.
      </p>
      <p>
        Now, I'm channeling that deep understanding into building the applications themselves. My journey is a natural progression from infrastructure to interaction—from ensuring the system runs, to crafting the experiences users love. With a drive to master the full stack, I build clean, efficient, and thoughtful digital solutions.
      </p>
    </div>
    <div class="about-image">
      <AboutVisual />
    </div>
  </div>
</section>

<style>
  .about {
    padding: 1rem 2rem;
  }

  .about-content {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    max-width: 1400px;
    margin: 0 auto;
    align-items: center;
  }

  .about-text {
    max-width: 65ch;
    min-width: 30ch;
  }

  @media (min-width: 1024px) {
    .about-text {
      max-width: 140ch;
    }
  }

  .about-label {
    font-family: 'IBM Plex Mono', monospace;
    color: var(--accent-color);
    font-weight: 500;
    margin-bottom: 1rem;
  }

  .about-heading {
    font-family: var(--font-serif);
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 700;
    margin-bottom: 2rem;
    line-height: 1.2;
  }

  .about-image {
    display: none;
  }

  @media (min-width: 768px) {
    .about-content {
      grid-template-columns: 2fr 1fr;
    }

    .about-image {
      display: block;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const heading = document.querySelector('.about-heading');
    if (!heading) return;

    const text = heading.textContent;
    if (!text) return;
    heading.textContent = '';

    let i = 0;
    const typing = () => {
      if (i < text.length) {
        heading.textContent += text.charAt(i);
        i++;
        setTimeout(typing, 100);
      } else {
        const cursor = document.createElement('span');
        cursor.textContent = '█';
        cursor.style.animation = 'blink 1s step-end infinite';
        heading.appendChild(cursor);
        setTimeout(() => {
          cursor.style.display = 'none';
        }, 3000);
      }
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          typing();
          observer.unobserve(entry.target);
        }
      });
    });

    observer.observe(heading);
  });
</script>

<style is:global>
  @keyframes blink {
    from, to {
      opacity: 1;
    }
    50% {
      opacity: 0;
    }
  }
</style>
